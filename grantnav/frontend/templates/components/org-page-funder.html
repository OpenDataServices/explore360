{% load frontend %} 

<article class="media-card media-card--teal">
    <div class="media-card__content_no_image">
    <header class="media-card__header">
        <h3 class="media-card__heading">As Funder</h3>
    </header>
    <div class="media-card__box_container">
        <div class="media-card__box">
        {{funder.grants | get_amount }} <br/>
        <strong>Total Grants</strong>
        </div>
        <div class="media-card__box">
        {{funder.recipients | get_amount }} <br/>
        <strong>Recipients</strong>
        </div>
        <div class="media-card__box">
        {{funder.minAwardDate | get_date }} <br/>
        <strong>Earliest Award</strong>
        </div>
        <div class="media-card__box">
        {{funder.maxAwardDate | get_date }} <br/>
        <strong>Latest Award</strong>
        </div>
    </div>
    <div class="media-card__box_container">
        {% for stat in funder.stats_by_currency %}
        <div class="media-card__box">
            {{stat.grants | get_amount }} <br/>
            <strong> Grants in {{stat.currency}} </strong>
        </div>
        <div class="media-card__box">
            {{stat.currency | currency_symbol}}{{stat.total | get_amount}} <br/>
            <strong> Total Grants {%if stat.currency != 'GBP'%} ({{stat.currency}}) {% endif %}</strong>
        </div>
        <div class="media-card__box">
            {{stat.currency | currency_symbol}}{{stat.max | get_amount}} <br/>
            <strong> Greatest Amount {%if stat.currency != 'GBP'%} ({{stat.currency}}) {% endif %}</strong>
        </div>
        <div class="media-card__box">
            {{stat.currency | currency_symbol}}{{stat.min | get_amount}} <br/>
            <strong> Smallest Amount {%if stat.currency != 'GBP'%} ({{stat.currency}}) {% endif %}</strong>
        </div>
        <div class="media-card__box">
            {{stat.currency | currency_symbol}}{{stat.avg | get_amount}} <br/>
            <strong> Average Amount {%if stat.currency != 'GBP'%} ({{stat.currency}}) {% endif %}</strong>
        </div>
        {% endfor %}
    </div>

    {% if not publisher %}
        <div class="spacer-4">
            <div class="text-center">
            <p>
                This data was originally published by
                <a href="{% url 'org' funder.funder_publisher.prefix %}"
                >{{ funder.funder_publisher.name }}</a
                >
                see
                <a href="{% url 'org' funder.funder_publisher.prefix %}"
                >their GrantNav publisher page</a
                >
                for more information.
            </p>
            </div>
        </div>
    {% endif %}

    <div>
        <a href="{% url 'search' %}?{{funder.grant_search_parameters}}">
            <div class="hero hero--orange hero__center padding-top:2 padding-bottom:2">
                <!-- .hero--orange, .hero--yellow, .hero--red -->
                <div class="hero__column">
                    <p class="hero__blurb">
                        Explore grants in GrantNav.
                    </p>
                </div>
                <div class="hero__column hero__logo hero__lead">
                    {% include 'tokens/main-logo.html' %}
                </div>
            </div>
        </a>
    </div>


    <div class='spacer-4'>
        <div class="box box--teal">
        <h3 class="box__heading">This data is provided for information purposes only.</h3>
        <p>Please refer
            to the funder website for details of current grant programmes,
            application guidelines and eligibility criteria.</a></p>
        </div>
    </div>
    <div class="section">
        <div class="grantnav-datatable__content--filters margin-top:05">
        <h4>Recipients</h4>
        <div class="export-wrapper">
            <div class="export-label">Export search data:</div>

            <div class="export-button">
            {% include 'components/export-data-button--csv.html' with data_function='funder_recipients_datatables.csv' parameter="funder_id=" query=funder.id %}
            </div>

            <div class="export-button">
            {% include 'components/export-data-button--json.html' with data_function='funder_recipients_datatables.json' parameter="funder_id=" query=funder.id %}
            </div>
        </div>
        </div>
        <div class="table table--zebra">
        <table class="table table--zebra table--small dt-responsive full-width" id="recipients_datatable">
            <thead>
            <tr>
                <th>Recipient</th>
                <th>Grants</th>
                <th class="amount">Total</th>
                <th class="amount">Average</th>
                <th class="amount">Largest</th>
                <th class="amount">Smallest</th>
            </tr>
            </thead>
        </table>
        </div>
    </div>
    </div>

</article>