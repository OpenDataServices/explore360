{% load get_currency get_amount get_title get_name get_date from frontend %}

<div class="grant-search-result">
  <div class="grant-search-result__left-side">
    <a class="grant-search-result__title" href="{% url 'grant' result.source.id %}">
      {{ result.source|get_title }}
    </a>

    <div class="grant-search-result__description">
      {{ result.source.description }}
    </div>
  </div>

  <div class="grant-search-result__right-side">
    <div class="grant-search-result__date">
      <time datetime="{{ result.source.awardDateDateOnly }}">
        {{ result.source.awardDateDateOnly | get_date }}
      </time>
    </div>

    <div class="grant-search-result__data-item">
      <span class="grant-search-result__data-item--label">Amount:</span>
      <span>{{result.source|get_currency}}{{result.source.amountAwarded|get_amount}}</span>
    </div>

    <div class="grant-search-result__data-item">
      <span class="grant-search-result__data-item--label">Funder:</span>
      <span><a href="{% url 'funder' result.source.fundingOrganization.0.id %}">{{ result.source.fundingOrganization.0 | get_name }}</a></span>
    </div>

    <div class="grant-search-result__data-item">
      <span class="grant-search-result__data-item--label">Recipient:</span>
      <span><a href="{% url 'recipient' result.source.recipientOrganization.0.id %}">{{ result.source.recipientOrganization.0|get_name|truncatechars:40 }}</a></span>
    </div>
    {% if result.source.additional_data.recipientRegionName %}
      <div class="grant-search-result__data-item">
        <span class="grant-search-result__data-item--label">Region:</span>
        <span><a href="{% url 'region' result.source.additional_data.recipientRegionName %}">{{ result.source.additional_data.recipientRegionName }}</a></span>
      </div>
    {% endif %}
    {% if result.source.additional_data.recipientDistrictName %}
    <div class="grant-search-result__data-item">
      <span class="grant-search-result__data-item--label">District:</span>
      <span><a href="{% url 'district' result.source.additional_data.recipientDistrictName %}">{{ result.source.additional_data.recipientDistrictName }}</a></span>
    </div>
    {% endif %}
  </div>
</div>
